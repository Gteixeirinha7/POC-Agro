<template>
    <div class="container">
        <div style="padding-bottom: 10px;">
            <h3 slot="title">
                <lightning-icon icon-name="utility:connected_apps" size="small"></lightning-icon>
                    Tabela de Preços
            </h3>
            <div slot="footer">
            </div>
        </div>
        <details open class="details" style="background-color: white;">
            <summary>Filtros</summary> 
            <div>
                <div class="filtros-main">
                    <div class="filtros">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control" style="margin-top: -15px;">
                                <div class="slds-combobox_container">
                                    <div class={txtclassnameClient} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Safra <span class="field-required">*</span>
                                                        </div>
                                                        <div class="content cont-label">
                                                            <c-custom-lookup 
                                                                object-api-name="Crop__c" 
                                                                field-api-name="Name"
                                                                field-api-names="Name"
                                                                object-icon-name="custom:custom5"
                                                                filter=" AND Active__c = true"
                                                                onselectrecord={handleNewRecordCrop}
                                                                custom-lookup-name="customLookupCrop"
                                                                record-id={clienteId}
                                                                selected-record={orderObject.Crop}
                                                                disabled-custom-lookup={disabledCustomLookup}>
                                                            </c-custom-lookup>
                                                        </div>
                                                    </div>
                                                </div>      
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filtros">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control" style="margin-top: -15px;">
                                <div class="slds-combobox_container">
                                    <div class={txtclassnameCrop} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Cliente
                                                        </div>
                                                        <div class="content cont-label">
                                                            <c-custom-lookup    
                                                                object-api-name="Account" 
                                                                field-api-name="Name"
                                                                field-api-names="Name "
                                                                object-icon-name="standard:account"
                                                                filter=" AND RecordType.DeveloperName <> 'Property' "
                                                                record-id={clienteId}
                                                                onselectrecord={handleNewRecordAccount}
                                                                custom-lookup-name="customLookupAccount"
                                                                selected-record={orderObject.Account}
                                                                disabled-custom-lookup={disabledCustomLookup}>
                                                            </c-custom-lookup>
                                                        </div>
                                                    </div>
                                                </div>      
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filtros">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control" style="margin-top: -15px;">
                                <div class="slds-combobox_container">
                                    <div class={txtclassnameCrop} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Data de Pagamento <span class="field-required">*</span>
                                                        </div>
                                                            <div>
                                                                <lightning-input type="date" name="inputDateVencimento" variant="label-hidden" value={Dates.DueDate} onchange={handlePaymentDate}>
                                                                </lightning-input>
                                                            </div>
                                                    </div>
                                                </div>      
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filtros">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control" style="margin-top: -15px;">
                                <div class="slds-combobox_container">
                                    <div class={txtclassnameCrop} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Condição de Venda
                                                        </div>
                                                        <c-custom-lookup-sales-conditon 
                                                            object-name="Order" 
                                                            field-name="SalesCondition__c" 
                                                            field-label=""
                                                            show-all-option="true"
                                                            onselectpicklist={handleNewRecordSalesCondiction}
                                                            picklist-name="salesConditionPickList"
                                                            value={salesCondition}
                                                            disabled-custom-lookup={disabledSalesCondition}> 
                                                        </c-custom-lookup-sales-conditon>
                                                    </div>
                                                </div>      
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filtros">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control" style="margin-top: -15px;">
                                <div class="slds-combobox_container">
                                    <div class={txtclassnameCrop} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Equipe de Vendas <span class="field-required">*</span>
                                                        </div>
                                                        <div class="content cont-label">
                                                            <c-custom-lookup-sales-team
                                                                object-api-name="SalesTeam__c" 
                                                                field-api-name="Name;ExternalId__c "
                                                                field-api-names=", DistributionCenter__r.City__c, SalesOrg__c, SalesOrg__r.Name, SalesOrg__r.Director__r.Name, ParentId__c, Manager__r.Name"
                                                                object-icon-name="custom:custom27"
                                                                record-id={account}
                                                                filter=" AND Id IN (replace) "
                                                                onselectrecord={handleNewSalesTeam}
                                                                custom-lookup-name="customLookupSalesTeam"
                                                                sales-team-list={salesTeamList}
                                                                selected-record={orderObject.SalesTeam}
                                                                disabled-custom-lookup={disabledCustomLookup}>
                                                            </c-custom-lookup-sales-team>
                                                        </div>
                                                    </div>
                                                </div>      
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filtros">
                    <div class="slds-form-element">
                        <div class="slds-form-element__control" style="margin-top: -15px;">
                            <div class="slds-combobox_container">
                                <div class={txtclassnameCrop} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                       <div class="row">
                                            <div class="col-12">
                                                <div class="unique-data">
                                                    <div class="lb-commom">
                                                        Setor de Atividade
                                                    </div>
                                                        <c-show-picklist-value 
                                                            object-name="ListPrice__c" 
                                                            field-name="ActivitySector__c" 
                                                            field-label=""
                                                            show-all-option={showAllOptions}
                                                            value={activitySector}
                                                            onselectpicklist={handleNewRecordActivitySector}
                                                            picklist-name="activitySectorPickList">
                                                        </c-show-picklist-value>
                                                     </div>
                                            </div>      
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    </div>
                    <div class="filtros">
                    <div class="slds-form-element">
                        <div class="slds-form-element__control" style="margin-top: -15px;">
                            <div class="slds-combobox_container">
                                <div class={txtclassnameCrop} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                       <div class="row">
                                            <div class="col-12">
                                                <div class="unique-data">
                                                    <div class="lb-commom">Moeda</div>
                                                </div>
                                                <div class="box-moeda" style="display: flex; justify-content: space-between;">
                                                    <div class="form-check form-check-inline bg-white p-2 px-3 border rounded">
                                                        <input class="form-check-input" checked={currencyReal} type="radio" name="inlineRadio" id="inlineRadio1" value="BRL" onclick={handleCurrency} disabled={disabledCustomLookup}>
                                                        <label class="form-check-label" for="inlineRadio1">Real (R$)</label>
                                                    </div>
                                                    <div class="form-check form-check-inline bg-white p-2 px-3 border rounded">
                                                        <input class="form-check-input" checked={currencyDolar} type="radio" name="inlineRadio" id="inlineRadio2" value="USD" onclick={handleCurrency} disabled={disabledCustomLookup}>
                                                        <label class="form-check-label" for="inlineRadio2">Dolar (US$)</label>
                                                    </div>
                                                </div>
                                            </div>      
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    </div>
                    <div class="filtros">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control" style="margin-top: -15px;">
                                <div class="slds-combobox_container">
                                    <div class={txtclassnameMaterial} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Produto <span class="field-required">*</span>
                                                        </div>
                                                        <div class="content cont-label">
                                                            <c-custom-lookup-for-table-screen
                                                                object-api-name="Product2" 
                                                                field-api-name="Name;ExternalId__c"
                                                                field-api-names="Name"
                                                                object-icon-name="custom:custom13"
                                                                onselectrecord={handleNewRecordProduct}
                                                                filter=" "
                                                                active-principle={activePrincible}
                                                                product-family={productFamily}
                                                                record-id={clienteId}
                                                                custom-lookup-name="customLookupActivePrincible">
                                                            </c-custom-lookup-for-table-screen>
                                                        </div>
                                                    </div>
                                                </div>      
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filtros">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control" style="margin-top: -15px;">
                                <div class="slds-combobox_container">
                                    <div class={txtclassnameMaterial} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Família de Produto <span class="field-required">*</span>
                                                        </div>
                                                        <div class="content cont-label">
                                                            <c-custom-lookup
                                                                object-api-name="Family__c" 
                                                                field-api-name="Name"
                                                                field-api-names="Name"
                                                                object-icon-name="custom:custom13"
                                                                onselectrecord={handleFamily}
                                                                filter=""
                                                                record-id={clienteId}
                                                                custom-lookup-name="customLookupFamily"
                                                                disabled-custom-lookup={disabledProduct2}>
                                                            </c-custom-lookup>
                                                        </div>
                                                    </div>
                                                </div>      
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filtros">
                    <div class="slds-form-element">
                        <div class="slds-form-element__control" style="margin-top: -15px;">
                            <div class="slds-combobox_container">
                                <div class={txtclassnameCrop} data-id="resultBox" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                                       <div class="row">
                                            <div class="col-12">
                                                <div class="unique-data">
                                                    <div class="lb-commom">
                                                        Princípio Ativo <span class="field-required">*</span>
                                                    </div>
                                                    <div class="content cont-label">
                                                        <c-custom-lookup-active-principle
                                                            object-api-name="Product2" 
                                                            field-api-name="ActivePrinciple__c"
                                                            field-api-names="ActivePrinciple__c"
                                                            object-icon-name="custom:custom13"
                                                            onselectrecord={handleActivePrincible}
                                                            filter="ActivePrinciple__c != null"
                                                            record-id={clienteId}
                                                            custom-lookup-name="customLookupActivePrincible">
                                                        </c-custom-lookup-active-principle>
                                                    </div>
                                                </div>
                                            </div>      
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon slds-input-has-icon_left-right" role="none">
                <template for:each={selectedRecords} for:item="serecord">
                    <span key={serecord.recId} class="filter-itens">
                    <lightning-pill label={serecord.recName} name={serecord.recId} onremove={removeRecord} class="filter-itens-label">
                            <lightning-icon icon-name={iconName} size="xx-small" variant="circle" alternative-text={serecord.recName} class="slds-icon_small"></lightning-icon>
                        </lightning-pill>
                    </span>
                </template>
            </div>
            <div class="col-6 col-xs-6 text-right produtos filtros-main produtos row mx-auto col-md-12 col-sm-12 mb-3" style="display: flex;">
                <button class="btn btn-outline-primary btn-nav-steps" onclick={search}>
                    <span>Filtrar</span>
                </button>
            </div>
        </details>
        <div>
            <div if:true={LoadingTextForCards} class='filtros-main'>
                Nenhuma lista de preço a ser exibida, utilize os filtros para conseguir visualizar as listas de preço da sua região.
            </div>
            <div class="filtros-main">
                <template if:true={loading}>
                    <div class="demo-only">
                        <div class="slds-spinner_container" style="position: fixed;">
                            <div role="status" class="slds-spinner slds-spinner_medium slds-spinner_brand">
                                <div class="slds-spinner__dot-a"></div>
                                <div class="slds-spinner__dot-b"></div>
                            </div>
                        </div>
                    </div>
                </template>
                <template for:each={selectedRecordsListPrice} for:item="record">
                    <div class="produtos" key={record.Id}>
                        <div class="box-lista-produtos">
                            <div class="row">
                                <div class="mx-auto col-md-12 col-sm-12 mb-3">
                                    <div class="card card-lista-pedido border-primary">
                                        <div class="card-body">
                                            <div class="row" >
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Lista de Preço
                                                        </div>
                                                        <div class="content" style="color: green;">
                                                            {record.Name}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" >
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Produto
                                                        </div>
                                                        <div class="content" style="color: green;">
                                                            {record.ProductName}
                                                        </div>
                                                        <div if:true={record.IsAvaliable} class="content" style="color: red;">
                                                            Produto Indisponível para Venda
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div if:true={currencyReal} class="lb-commom">
                                                            Preço de Lista (R$)
                                                        </div>
                                                        <div if:true={currencyDolar} class="lb-commom">
                                                            Preço Unitário (US$)
                                                        </div>
                                                        <div class="content">
                                                            {record.UnitPrice}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div if:true={record.Discount} class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div if:true={currencyReal} class="lb-commom">
                                                            Desconto de Antecipação (Unitário) (R$)
                                                        </div>
                                                        <div if:true={currencyDolar} class="lb-commom">
                                                            Desconto de Antecipação (Unitário) (US$)
                                                        </div>
                                                        <div class="content">
                                                            {record.TotalInterest}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div if:true={record.Juros} class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div if:true={currencyReal} class="lb-commom">
                                                            Juros Unitário (Unitário) (R$)
                                                        </div>
                                                        <div if:true={currencyDolar} class="lb-commom">
                                                            Juros Unitário (Unitário) (US$)
                                                        </div>
                                                        <div class="content">
                                                            {record.TotalInterest}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div if:true={record.FinalPrice} class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div if:true={currencyReal} class="lb-commom">
                                                            Preço Unitário Total (R$)
                                                        </div>
                                                        <div if:true={currencyDolar} class="lb-commom">
                                                            Preço Unitário Total (US$)
                                                        </div>
                                                        <div class="content">
                                                            {record.TotalPrice}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div if:true={record.ShowTeamName} class="row" >
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Equipe de Vendas
                                                        </div>
                                                        <div class="content">
                                                            {record.SalesTeamName}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" >
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Safra
                                                        </div>
                                                        <div class="content">
                                                            {record.CropName}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div if:true={record.ShowSalesCondition} class="row" >
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Condição de Venda
                                                        </div>
                                                        <div class="content">
                                                            {record.SalesCondition}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="unique-data">
                                                        <div class="lb-commom">
                                                            Válido até
                                                        </div>
                                                        <div class="content">
                                                            {record.EndDate}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            -->                                  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </div>
</template>